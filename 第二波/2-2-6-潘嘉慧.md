## base64 为什么能提升性能，缺点

图片的 base64 编码就是可以将一副图片数据编码成一串字符串，使用该字符串代替图像地址。

意义:网页上的每一个图片，都是需要消耗一个 http 请求下载而来的（所有才有了 csssprites 技术的应运而生，但是 csssprites 有自身的局限性）。

图片的下载始终都要向服务器发出请求，要是图片的下载不用向服务器发出请求，base64 可以随着 HTML 的下载同时下载到本地.减少 https 请求。

缺点:

1. CRP 的阻塞
   使用 Base64 的好处是能够减少一个图片的 HTTP 请求，然而，与之同时付出的代价则是 CSS 文件体积的增大。
   而 CSS 文件体积的增大意味着什么呢？意味着 CRP 的阻塞。
   CRP（Critical Rendering Path，关键渲染路径）：当浏览器从服务器接收到一个 HTML 页面的请求时，到屏幕上渲染出来要经过很多个步骤。浏览器完成这一系列的运行，或者说渲染出来我们常常称之为“关键渲染路径”。
   通俗而言，就是图片不会导致关键渲染路径的阻塞，而转化为 Base64 的图片大大增加了 CSS 文件的体积，CSS 文件的体积直接影响渲染，导致用户会长时间注视空白屏幕。HTML 和 CSS 会阻塞渲染，而图片不会。
2. 页面解析 CSS 生成的 CSSOM 时间增加
   Base64 跟 CSS 混在一起，大大增加了浏览器需要解析 CSS 树的耗时。其实解析 CSS 树的过程是很快的，一般在几十微妙到几毫秒之间。
   CSS 对象模型 (CSSOM)：CSSOM 是一个建立在 web 页面上的 CSS 样式的映射，它和 DOM 类似，但是只针对 CSS 而不是 HTML。
   CSSOM 生成过程大致是，解析 HTML ，在文档的 head 部分遇到了一个 link 标记，该标记引用一个外部 CSS 样式表，下载该样式表后根据上述过程生成 CSSOM 树。 这里我们要知道的是，CSSOM 阻止任何东西渲染，（意味着在 CSS 没处理好之前所有东西都不会展示），而如果 CSS 文件中混入了 Base64，那么（因为文件体积的大幅增长）解析时间会增长到十倍以上。
   而且，最重要的是，增加的解析时间全部都在关键渲染路径上。
   所以，当我们需要使用到 Base64 技术的时，一定要意识到上述的问题，有取舍的进行使用。
